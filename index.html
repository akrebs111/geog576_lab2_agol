

<!DOCTYPE html>
<html lang="en">
<head>
  <title>Geog576 Lab 2</title>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="description" content="" />

<!-- calls for arcgis api's css file and js lib-->
<link rel="stylesheet" href="https://js.arcgis.com/4.25/esri/themes/light/main.css">
<script src="https://js.arcgis.com/4.25/"></script>

<!--modules for widgets-->
<script>

  require([
    "esri/config", 
      "esri/Map", 
      "esri/views/MapView",
      "esri/widgets/BasemapGallery",
      "esri/widgets/Expand",
      "esri/widgets/Locate",
      "esri/widgets/Search",
      "esri/Graphic",
      "esri/layers/GraphicsLayer",
      "esri/geometry/Polyline",
      "esri/symbols/SimpleLineSymbol",
      "esri/geometry/Polygon",
      "esri/symbols/SimpleFillSymbol",
      "esri/layers/FeatureLayer"

  ], function(esriConfig, Map, MapView, BasemapGallery, Expand, Locate, Search, Graphic, GraphicsLayer, Polyline, SimpleLineSymbol, Polygon, SimpleFillSymbol, FeatureLayer) {  
      
    esriConfig.apiKey = "AAPTxy8BH1VEsoebNVZXo8HurGfXZVUftvXPbMTy0-GRI5ojxO2vkMfNJUc6LuBspKHa7_8adflxgEqdwsbZT_y64VwrYucfHRmak8KqEqK9KojibVke2tZigq1P4aWdi2ARSVyPCfBRuJPzRCNXkKqmMNKADPP407Mua44OxDb8aE4N4-3Rp6rAphNctReWb-FZ2fqziGxRK72mw3mmQSZtV-5YfnA0EHXD4rWw1OwRwQU-VcnibfCw_FYsDSK_eK6lAT1_77qtARkK";
    const map = new Map({
        basemap: "streets-vector" //basemap layer
      });

      const view = new MapView({
          map: map,
          center: [-89.0275, 42.6821], // center on Janesville, 
          zoom: 12, 
          container: "viewDiv" 
        });

      // Define a pop-up for ice age trail
      const popupDNR_IceAge_Trail = {
        "title": "Ice Trail Segment Name:",
        "content": "<b>{SEGMENT_NAME_TEXT}<br>"
      }

      const iceagetrailLayer = new FeatureLayer({
        url: "https://dnrmaps.wi.gov/arcgis/rest/services/LF_DML/LF_DNR_MGD_Recreational_Opp_WTM_Ext/MapServer/2",
         //adding the popup here
        outFields: ["SEGMENT_NAME_TEXT"],
        popupTemplate: popupDNR_IceAge_Trail
      });

      map.add(iceagetrailLayer);

      // Define a pop-up for airport ayer
      const airportsPopup = {
        "title": "Airport Name:",
        "content": "<b>{Fac_Name}<br>"
      }

      const airportLayer = new FeatureLayer({
        url: "https://services.arcgis.com/HRPe58bUyBqyyiCt/arcgis/rest/services/US_Airports_Krebs/FeatureServer",
         //adding the popup here
        outFields: ["Fac_Name"],
        popupTemplate: airportsPopup
      });

      map.add(airportLayer);

      const graphicsLayer = new GraphicsLayer();  
      map.add(graphicsLayer);
    
    const point = { //Create a point  
      type: "point",  
      longitude: -89.00454,    //Ice Age Trail entry point
      latitude: 42.67010
      };

    const simpleMarkerSymbol = {  
        type: "simple-marker",
        style: "triangle", 
        color: [0, 0, 139],  // Color of blues rock
        outline: {  
          color: [255, 255, 255], // White  
          width: 1
        }  
      };

    const popupTemplate = {
      title: "{Name}",
      content: "{Description}"
     }
    const attributes = {
        Name: "Ice Age Trail Access",
        Description: "A great place to access the Ice Age Trail. Parking is available."
    }

    const pointGraphic = new Graphic({  
      geometry: point,  
      symbol: simpleMarkerSymbol,
      
      attributes: attributes,
      popupTemplate: popupTemplate
      });

      const polyline = new Polyline({
        paths: [
          [-89.00453794108324, 42.67010422461891],
          [-89.00449731827311, 42.670050636709014],
          [-89.00367530394661, 42.670312426401956],
          [-89.00253547594153, 42.67075342533781]
        ],
        spatialReference: {wkid: 4326}
      });

      const lineSymbol = new SimpleLineSymbol({
        color: [226, 119, 40], // 
        width: 4
      });

      const polylineGraphic = new Graphic({
        geometry: polyline,
        symbol: lineSymbol
      });
      
      graphicsLayer.add(polylineGraphic);

    const polygon = new Polygon({
      rings: [
        [-89.0036712839692, 42.66918598136819],
        [-89.00355548463666, 42.66933328699369],
        [-89.0034879942281, 42.66931082552016],
        [-89.00362155419447, 42.669160385674246],
        [-89.0036712839692, 42.66918598136819]
      ],
      spatialReference: { wkid: 4326 }
    });

    // Define a fill symbol for the polygon
    const fillSymbol = new SimpleFillSymbol({
      color: [100, 100, 255, 0.3], // RGBA - blue with 30% opacity
      outline: {
        color: [0, 0, 139], // dark blue outline
        width: 2
      }
    });

     const polygonPopup = {
      title: "{Name}",
      content: "{Description}"
    };

    const polygonAttributes = {
      Name: "Ice Age Trail Bridge",
      Description: "Wood bridge over a creek."
    };


  // Create the polygon graphic
    const polygonGraphic = new Graphic({
      geometry: polygon,
      symbol: fillSymbol,
      attributes: polygonAttributes,
      popupTemplate: polygonPopup
    });

// Add polygon graphic to the map
graphicsLayer.add(polygonGraphic);

graphicsLayer.add(pointGraphic);

    //add widgets
    const basemapGallery = new BasemapGallery ({
      view: view
    });
    const expandBasemapGallery = new Expand({
      view:view,
      content: basemapGallery,
      expanded: false
    });

    const locateWidget = new Locate ({
      view:view
    });

    const searchWidget = new Search ({
      view: view});
      
      //widget placement
      
    view.ui.add(expandBasemapGallery, {
      position: "top-left",
    });

    view.ui.add(searchWidget, {
      position: "bottom-left",
    });

    view.ui.add(locateWidget, {
      position: "top-left",
    });
  });


</script>

<!-- css to make full screen map-->
<style>  
    html,  
    body,  
    #viewDiv {  
      padding: 0;
      margin: 0;
      height: 100%;
      width: 100%;  
    } 

  </style> 
</head>
<body>
  <!-- div to display the map-->
   <div id="viewDiv"></div>
</body>
</html>
